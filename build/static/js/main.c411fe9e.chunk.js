(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var r=t(18),c=t.n(r),o=t(3),a=t(1),u=t(19),i=t(0),s=function(e){return Object(i.jsxs)("div",{children:[e.person.name," ",e.person.number,Object(i.jsx)("button",{onClick:function(){return e.deletePerson(e.person.id)},children:"delete"})]})},d=function(e){var n=Object(u.a)(e.persons);return Object(i.jsx)("div",{children:n.map((function(n){return Object(i.jsx)(s,{person:n,deletePerson:e.deleteHandler},n.id)}))})},l=function(e){return Object(i.jsxs)("div",{children:[e.text,Object(i.jsx)("input",{value:e.value,onChange:e.filterHandler})]})},j=function(e){return Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:e.name,onChange:e.nameHandler})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:e.number,onChange:e.numberHandler})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",onClick:e.addHandler,children:"add"})})]})},b=t(5),f=t.n(b),m="http://localhost:3001/api/persons",h={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},add:function(e){return f.a.post(m,e).then((function(e){return e.data}))},deletePer:function(e){return f.a.delete("".concat(m,"/").concat(e))},replace:function(e,n){return f.a.put("".concat(m,"/").concat(n),e).then((function(e){return e.data}))}},p=function(e){var n=e.message,t=e.error;return null===n?null:!1===t?Object(i.jsx)("div",{className:"notification",children:n}):Object(i.jsx)("div",{className:"error",children:n})},O=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),u=Object(o.a)(c,2),s=u[0],b=u[1],f=Object(a.useState)(""),m=Object(o.a)(f,2),O=m[0],v=m[1],x=Object(a.useState)(""),g=Object(o.a)(x,2),w=g[0],H=g[1],k=Object(a.useState)(null),P=Object(o.a)(k,2),S=P[0],C=P[1],T=Object(a.useState)(!1),y=Object(o.a)(T,2),N=y[0],A=y[1];Object(a.useEffect)((function(){console.log("effect"),h.getAll().then((function(e){r(e)}))}),[]),console.log("render",t.length,"persons");var E=0===w.length?t:t.filter((function(e){return e.name.match(new RegExp(w,"i"))}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(p,{message:S,error:N}),Object(i.jsx)(l,{text:"filter shown with",value:w,filterHandler:function(e){H(e.target.value)}}),Object(i.jsx)("h3",{children:"add a new"}),Object(i.jsx)(j,{name:s,nameHandler:function(e){b(e.target.value)},number:O,numberHandler:function(e){v(e.target.value)},addHandler:function(e){e.preventDefault();var n={name:s,number:O};if(""===n.name||""===n.number)window.alert("Please enter name and number to add to phonebook!");else{var c=t.find((function(e){return e.name===n.name}));c?window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&h.replace(n,c.id).then((function(e){r(t.map((function(n){return n.id!==c.id?n:e}))),b(""),v(""),C("Updated ".concat(n.name,"'s Number")),setTimeout((function(){C(null)}),5e3)})).catch((function(e){400===e.response.status?(A(!0),C(e.response.data.error),setTimeout((function(){A(!1),C(null)}),5e3)):404===e.response.status&&(A(!0),C("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){A(!1),C(null)}),5e3),r(t.filter((function(e){return e.id!==c.id}))),b(""),v(""))})):h.add(n).then((function(e){r(t.concat(e)),b(""),v(""),C("Added ".concat(n.name)),setTimeout((function(){C(null)}),5e3)})).catch((function(e){A(!0),C(e.response.data.error),setTimeout((function(){A(!1),C(null)}),5e3),console.log(e.response.data)}))}}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(d,{persons:E,deleteHandler:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&h.deletePer(e).then(r(t.filter((function(n){return n.id!==e}))))}})]})};t(43);c.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.c411fe9e.chunk.js.map